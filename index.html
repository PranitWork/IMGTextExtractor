<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Image ‚Üí Text By- PranitDaphale</title>

    <!-- Tesseract.js -->
    <script  src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <!-- OpenCV.js (load without async to avoid race) -->
    <script async src="https://docs.opencv.org/4.x/opencv.js"></script>

    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="wrap">
        <div class="card" role="main" aria-live="polite">
            <h1>Image ‚Üí Text Extractor</h1>
            <p class="lead">Clean & Accurate Output</p>

            <div class="controls">
                <label class="filelabel" for="fileInput">üìÅ Choose image</label>
                <input id="fileInput" type="file" accept="image/*" style="display:none" />
                <button id="btnExtract" class="btn" disabled>üîç Extract Text</button>
                <button id="btnDownload" class="btn alt">‚¨áÔ∏è Download .txt</button>
                <div class="badge" id="confBadge">Confidence: ‚Äî</div>
            </div>

            <div class="status small" id="status">OpenCV: <span id="cvstatus">loading...</span> ¬∑ Tesseract: <span
                    id="tstatus">loading...</span></div>

            <div class="grid">
                <div class="left">
                    <div class="preview" id="previewBox">
                        <img id="previewImg" src="" alt="preview" />
                        <div class="small" style="margin-top:8px">Processed preview (best pass will be used)</div>
                        <div id="variantsRow" class="variants-row" style="margin-top:8px; display:none;"></div>
                    </div>

                    <div style="margin-top:12px">
                        <div style="display:flex; gap:8px; align-items:center;">
                            <label><input id="optDeskew" type="checkbox" checked /> Deskew</label>
                            <label><input id="optShowAll" type="checkbox" /> Show all processed previews</label>
                            <label><input id="optNormalize" type="checkbox" checked /> Post clean (normalize
                                whitespace)</label>
                        </div>
                    </div>

                    <div style="margin-top:12px">
                        <div class="small">Logs:</div>
                        <div id="log" class="log"></div>
                    </div>
                </div>

                <div>
                    <div style="display:flex; gap:8px; align-items:center;">
                        <div style="flex:1">
                            <div class="small">Result (copy/edit before saving):</div>
                            <textarea id="resultArea" placeholder="Extracted text will appear here..."></textarea>
                        </div>
                    </div>

                    <div class="controls-row" style="margin-top:8px">
                        <button id="btnCopy" class="btn alt">üìã Copy</button>
                        <button id="btnClear" class="btn alt">‚úñ Clear</button>
                        <button id="btnReprocess" class="btn alt">üîÅ Re-run</button>
                    </div>
                </div>
            </div>

            <div class="meta">
                <div class="small">Tip: Use clear scans and set DPI ‚â• 200 for best results.</div>
                <div class="small">¬© All rights reserved ‚Äì <a href="https://in.linkedin.com/in/pranitdaphale" target="_blank"> Pranit Daphale</a></div>
            </div>
        </div>
    </div>

    <!-- hidden canvases used by OpenCV -->
    <canvas id="srcCanvas" class="hidden"></canvas>
    <canvas id="procCanvas" class="hidden"></canvas>

<script src="script.js"></script>

</body>

</html>